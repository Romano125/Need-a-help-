<script type="text/javascript">
  var val;
  document.getElementById('r1').addEventListener('click', (e) => {
    e.preventDefault();

    val = document.getElementById('r11').value;

    document.getElementById('r1').classList.add('blocked');
    document.getElementById('r2').classList.remove('blocked');
    document.getElementById('r3').classList.remove('blocked');
    document.getElementById('r4').classList.remove('blocked');
    document.getElementById('r5').classList.remove('blocked');

    document.getElementById('r2').classList.remove('rating');
    document.getElementById('r3').classList.remove('rating');
    document.getElementById('r4').classList.remove('rating');
    document.getElementById('r5').classList.remove('rating');
    document.getElementById('r2').classList.remove('rate');
    document.getElementById('r3').classList.remove('rate');
    document.getElementById('r4').classList.remove('rate');
    document.getElementById('r5').classList.remove('rate');
    console.log(val);
  });
  document.getElementById('r2').addEventListener('click', (e) => {
    e.preventDefault();

    val = document.getElementById('r22').value;

    document.getElementById('r1').classList.add('blocked');
    document.getElementById('r2').classList.add('blocked');
    document.getElementById('r3').classList.remove('blocked');
    document.getElementById('r4').classList.remove('blocked');
    document.getElementById('r5').classList.remove('blocked');

    document.getElementById('r3').classList.remove('rating');
    document.getElementById('r4').classList.remove('rating');
    document.getElementById('r5').classList.remove('rating');
    document.getElementById('r3').classList.remove('rate');
    document.getElementById('r4').classList.remove('rate');
    document.getElementById('r5').classList.remove('rate');
  });
  document.getElementById('r3').addEventListener('click', (e) => {
    e.preventDefault();

    val = document.getElementById('r33').value;

    document.getElementById('r1').classList.add('blocked');
    document.getElementById('r2').classList.add('blocked');
    document.getElementById('r3').classList.add('blocked');
    document.getElementById('r4').classList.remove('blocked');
    document.getElementById('r5').classList.remove('blocked');

    document.getElementById('r4').classList.remove('rating');
    document.getElementById('r5').classList.remove('rating');
    document.getElementById('r4').classList.remove('rate');
    document.getElementById('r5').classList.remove('rate');
  });
  document.getElementById('r4').addEventListener('click', (e) => {
    e.preventDefault();

    val = document.getElementById('r44').value;

    document.getElementById('r1').classList.add('blocked');
    document.getElementById('r2').classList.add('blocked');
    document.getElementById('r3').classList.add('blocked');
    document.getElementById('r4').classList.add('blocked');
    document.getElementById('r5').classList.remove('blocked');

    document.getElementById('r5').classList.remove('rating');
    document.getElementById('r5').classList.remove('rate');
  });
  document.getElementById('r5').addEventListener('click', (e) => {
    e.preventDefault();

    val = document.getElementById('r55').value;

    document.getElementById('r1').classList.add('blocked');
    document.getElementById('r2').classList.add('blocked');
    document.getElementById('r3').classList.add('blocked');
    document.getElementById('r4').classList.add('blocked');
    document.getElementById('r5').classList.add('blocked');
  });
  document.getElementById('btn-submit').addEventListener('click', (e) => {
    e.preventDefault();

    txt = document.getElementById('feed').value;
    /*feed = '<img class="rounded-circle navbar-img" src="{{ user.profile.photo.url }}"> <a href="#">' + '{{ user.username }}';
    feed += '</a> ' + txt;*/
    feed = txt
    rep_id = document.getElementById('user').value;
    var job, req;
    if( document.getElementById('req') == null ) req = 0;
    else {
      req = document.getElementById('req').value;
    }
    if( document.getElementById('job') == null ) job = 0;
    else {
      job = document.getElementById('job').value;
    }

    if( val == undefined ) val = 0;

    location.href='{% url "rate" %}' + `?val=${val}&feedback=${feed}&rep_id=${rep_id}&req=${req}&job=${job}`;

    /*$.ajax({
      type: 'POST',
      url: '{% url "rate" %}',
      data: {
        rep_id: $('#user').val(),
        val: val,
        feedback: feed,
        req: req,
        job: job,
        csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val()
      },
      success: function() {
        alert('Rate done!');
      }
    });*/
  });
</script>
