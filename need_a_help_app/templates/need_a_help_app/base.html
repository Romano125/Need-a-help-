{% load static %}
<!DOCTYPE html>
<html>
    <head>
         <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
        <link rel="stylesheet" type="text/css" href="{% static 'need_a_help_app/style.css' %}">

        <title>Need a help?!</title>
    </head>
    <body>

      <div id="wrapper">

          {% if user.is_authenticated and user.profile.role == 'client' %}
            <div id="sidebar-wrapper">
                <ul class="sidebar-nav">
                    <div class="list-group pt-2 d-none d-sm-none d-md-block d-lg-block">
                      <a class="list-group-item sb" href="{% url 'main' %}"><i class="fa fa-home fa-fw" aria-hidden="true"></i>&nbsp; Home</a>
                      <a class="list-group-item sb" href="#"><i class="fa fa-envelope fa-fw" aria-hidden="true"></i>&nbsp; Messages</a>
                      <a class="list-group-item sb" href="{% url 'notifications_client' user.id %}"><i class="fa fa-bell fa-fw" aria-hidden="true"></i>&nbsp; My notifications</a>
                      <a class="list-group-item sb" href="{% url 'profile' user.id %}"><i class="fa fa-cog fa-fw" aria-hidden="true"></i>&nbsp; Settings</a>
                      <a class="list-group-item sb" href="{% url 'favorites' %}"><i class="fa fa-star fa-fw" aria-hidden="true"></i>&nbsp; My favourites</a>
                    </div>
                    <div class="list-group pt-2 d-block d-sm-block d-md-none d-lg-none">
                      <a class="list-group-item sb" href="{% url 'main' %}"><i class="fa fa-home fa-fw" aria-hidden="true"></i></a>
                      <a class="list-group-item sb" href="#"><i class="fa fa-envelope fa-fw" aria-hidden="true"></i></a>
                      <a class="list-group-item sb" href="{% url 'notifications_client' user.id %}"><i class="fa fa-bell fa-fw" aria-hidden="true"></i></a>
                      <a class="list-group-item sb" href="{% url 'profile' user.id %}"><i class="fa fa-cog fa-fw" aria-hidden="true"></i></a>
                      <a class="list-group-item sb" href="{% url 'favorites' %}"><i class="fa fa-star fa-fw" aria-hidden="true"></i></a>
                    </div>
                </ul>
            </div>
          {% elif user.is_authenticated and user.profile.role == 'repairman' %}
            <div id="sidebar-wrapper">
                <ul class="sidebar-nav">
                    <div class="list-group pt-2 d-none d-sm-none d-md-block d-lg-block">
                      <a class="list-group-item sb" href="{% url 'main' %}"><i class="fa fa-home fa-fw" aria-hidden="true"></i>&nbsp; Home</a>
                      <a class="list-group-item sb" href="#"><i class="fa fa-envelope fa-fw" aria-hidden="true"></i>&nbsp; Messages</a>
                      <a class="list-group-item sb" href="{% url 'notifications_repairman' user.id %}"><i class="fa fa-bell fa-fw"></i>&nbsp; My notifications</a>
                      <a class="list-group-item sb" href="{% url 'profile' user.id %}"><i class="fa fa-cog fa-fw" aria-hidden="true"></i>&nbsp; Settings</a>
                      <a class="list-group-item sb" href="#"><i class="fa fa-star fa-fw" aria-hidden="true"></i>&nbsp; My feedbacks</a>
                      <a class="list-group-item sb" href="{% url 'repairman_apps' user.id %}"><i class="fas fa-pencil-alt"></i>&nbsp; My applications</a>
                    </div>
                    <div class="list-group pt-2 d-block d-sm-block d-md-none d-lg-none">
                      <a class="list-group-item sb" href="{% url 'main' %}"><i class="fa fa-home fa-fw" aria-hidden="true"></i></a>
                      <a class="list-group-item sb" href="#"><i class="fa fa-envelope fa-fw" aria-hidden="true"></i></a>
                      <a class="list-group-item sb" href="{% url 'notifications_repairman' user.id %}"><i class="fa fa-bell fa-fw"></i></a>
                      <a class="list-group-item sb" href="{% url 'profile' user.id %}"><i class="fa fa-cog fa-fw" aria-hidden="true"></i></a>
                      <a class="list-group-item sb" href="#"><i class="fa fa-star fa-fw" aria-hidden="true"></i></a>
                      <a class="list-group-item sb" href="{% url 'repairman_apps' user.id %}"><i class="fas fa-pencil-alt"></i></a>
                    </div>
                </ul>
            </div>
          {% endif %}

          <header class="site-header">
            <nav class="navbar navbar-expand-md navbar-dark bg-steel fixed-top">
              <div class="container">
                {% if user.is_authenticated %}
                  <a href='#' id='menu-toggle'><div class='menu-icon'></div>
                                  <div class='menu-icon'></div>
                                  <div class='menu-icon'></div></a>
                  <a class="navbar-brand mr-4 ml-3" href="{% url 'main' %}">Need a help?!</a>
                  <span class="navbar-toggler" style="border: none;" data-toggle="collapse" data-target="#navbarToggle" aria-controls="navbarToggle" aria-expanded="false" aria-label="Toggle navigation">
                    <img class="rounded-circle navbar-img navbar-toggler-icon" src="{{ user.profile.photo.url }}"><i class="fas fa-caret-down" style="color: white"></i>
                  </span>
                {% else %}
                  <a class="navbar-brand mr-4" href="#">Need a help?!</a>
                  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarToggle" aria-controls="navbarToggle" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                  </button>
                {% endif %}
                <div class="collapse navbar-collapse" id="navbarToggle">
                  <div class="navbar-nav mr-auto">
                    <a class="nav-item nav-link" href="{% url 'home' %}">About</a>
                    {% if user.is_authenticated %}
                      <div class="d-sm-block d-md-none">
                        <a class='nav-item nav-link' href='{% url 'info' user.id %}'><i class='fa fa-user fa-fw' aria-hidden='true'></i>&nbsp; My profile</a>
                        <a class='nav-item nav-link' href='{% url 'logout' %}'><i class='fas fa-power-off'></i>&nbsp Logout</a>
                      </div>
                      <div  class="collapse navbar-collapse hidden-xs">

                        <!-- blokovi za obavijesti ovisno o ulozi -->
                        {% if user.profile.role == 'repairman' %}
                          {% block notify_repairman %}{% endblock %}
                        {% else %}
                          {% block notify_client %}{% endblock %}
                        {% endif %}

                        <!-- blokovi za poruke ovisno o ulozi -->
                        <i class="nav-item nav-link fas fa-envelope mt-1"></i>
                        {% block mess_client %}{% endblock %}
                        {% block mess_repairman %}{% endblock %}
                      </div>
                    {% else %}
                      <div class="d-sm-block d-md-none">
                        <a class="nav-item nav-link" href="{% url 'login' %}">Login</a>
                        <a class="nav-item nav-link" href="{% url 'register' %}">Register</a>
                      </div>
                    {% endif %}
                  </div>
                </div>
                  <!-- Navbar Right Side -->
                  <div class="navbar-nav">
                    {% if user.is_authenticated %}
                      <div class="collapse navbar-collapse hidden-xs">
                          <span class="nav-item nav-link">Welcome, {{ user.username }}
                            <img class="rounded-circle navbar-img popOver" data-title="Logged in as {{ user.profile.role }}" data-content="
                                <a class='list-group-item sb' href='{% url 'info' user.id %}'><i class='fa fa-user fa-fw' aria-hidden='true'></i>&nbsp; My profile</a>
                                <a class='list-group-item sb' href='{% url 'logout' %}'><i class='fas fa-power-off'></i>&nbsp Logout</a>" data-placement="bottom" data-html="true" data-toggle="popover" data-container="body" data-trigger="click" src="{{ user.profile.photo.url }}">
                          </span>
                          <!-- <a class="nav-item nav-link" href="{% url 'logout' %}"><i class="fas fa-power-off"></i>&nbsp Logout</a>-->
                      </div>
                    {% else %}
                      <div class="collapse navbar-collapse">
                        <a class="nav-item nav-link" href="{% url 'login' %}">Login</a>
                        <a class="nav-item nav-link" href="{% url 'register' %}">Register</a>
                      </div>
                    {% endif %}
                  </div>
              </div>
            </nav>
          </header>

          <div id="page-content-wrapper">

            {% block main %}
            {% endblock %}

            {% if user.is_authenticated and user.profile.role == 'client' %}
              {% block app_client %}
                <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
                  <ol class="carousel-indicators">
                    <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                    <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                    <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                  </ol>
                  <div class="carousel-inner">

                        <div class="carousel-item active">
                            <img class="slide-img" src="https://www.bing.com/th?id=OIP.GdOM_bEhNhmrmAG4XTVTiQHaE8&pid=Api" alt="First slide">
                        </div>
                        <div class="carousel-item">


                                <img class="slide-img" src="https://d2gg9evh47fn9z.cloudfront.net/800px_COLOURBOX1829407.jpg" alt="Second slide">

                        </div>
                        <div class="carousel-item">


                                <img class="slide-img" src="http://www.leevalley.com/us/images/item/Woodworking/Planes/05p5651s08.jpg" alt="Third slide">

                        </div>
                  </div>
                  <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                  </a>
                  <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                  </a>
                </div>
                <div class="container pt-4">
                    <div class="row justify-content-center">
                        <div class="col-12 col-md-10 col-lg-8">
                            <form class="card card-sm" action="{% url 'search' %}" method="GET">
                                <div class="card-body row no-gutters align-items-center">
                                    <div class="col-auto">
                                        <i class="fas fa-search h4 text-body"></i>&nbsp&nbsp
                                    </div>
                                    <!--end of col-->
                                    <div class="col">
                                        <input class="form-control form-control-lg form-control-borderless" name="q" type="text" placeholder="Where is a problem?">
                                    </div>
                                    <!--end of col-->
                                    <div class="col-auto">
                                        &nbsp<button class="btn btn-lg btn-success" type="submit">Search</button>
                                    </div>
                                    <!--end of col-->
                                </div>
                            </form>
                        </div>
                        <!--end of col-->
                    </div>
                </div>
                <hr width="100%">
                <br/>
                <div class="container p-4">
                    <div class="row" align="center">
                        <div class="col-3 col-sm-3">
                            <a href="#" class="btn btn-outline-danger"><i class="fas fa-medal fa-3x"></i></a>
                        </div>
                        <div class="col-3 col-sm-3">
                            <a href="{% url 'requests_user' user.id %}" class="btn btn-info"><i class="fas fa-clipboard-list fa-3x"></i></a>
                        </div>
                        <div class="col-3 col-sm-3">
                            <a href="{% url 'hired_user' user.id %}" class="btn btn-outline-warning"><i class="fas fa-handshake fa-3x"></i></a>
                        </div>
                        <div class="col-3 col-sm-3">
                            <a href="#" class="btn btn-outline-success"><i class="far fa-check-circle fa-3x"></i></a>
                        </div>
                    </div>
                    <div class="row" align="center">
                        <div class="col-3 col-sm-3">
                            <h5>Top rated</h5>
                        </div>
                        <div class="col-3 col-sm-3">
                            <h5>My requests</h5>
                        </div>
                        <div class="col-3 col-sm-3">
                            <h5>Hired</h5>
                        </div>
                        <div class="col-3 col-sm-3">
                            <h5>Done jobs</h5>
                        </div>
                    </div>
                </div>
                <hr width="100%">
              {% endblock %}
            {% elif user.is_authenticated and user.profile.role == 'repairman' %}
              {% block app_repairman %}
                <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
                  <ol class="carousel-indicators">
                    <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                    <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                    <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                  </ol>
                  <div class="carousel-inner">

                        <div class="carousel-item active">
                            <img class="slide-img" src="https://www.bing.com/th?id=OIP.GdOM_bEhNhmrmAG4XTVTiQHaE8&pid=Api" alt="First slide">
                        </div>
                        <div class="carousel-item">


                                <img class="slide-img" src="https://d2gg9evh47fn9z.cloudfront.net/800px_COLOURBOX1829407.jpg" alt="Second slide">

                        </div>
                        <div class="carousel-item">


                                <img class="slide-img" src="http://www.leevalley.com/us/images/item/Woodworking/Planes/05p5651s08.jpg" alt="Third slide">

                        </div>
                  </div>
                  <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                  </a>
                  <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                  </a>
                </div>
                <div class="container p-4">
                    <div class="row" align="center">
                        <div class="col-3 col-sm-3">
                            <a href="#" class="btn btn-outline-warning"><i class="fas fa-star fa-3x"></i></a>
                        </div>
                        <div class="col-3 col-sm-3">
                              <a href="{% url 'requests_repairman' user.id %}" class="btn btn-info">
                                  <i class="fas fa-clipboard-list fa-3x"></i>
                              </a>
                              {% block count %}{% endblock %}
                        </div>
                        <div class="col-3 col-sm-3">
                            <a href="{% url 'active_repairman' user.id %}" class="btn btn-outline-dark"><i class="fas fa-handshake fa-3x"></i></a>
                            {% block active %}{% endblock %}
                        </div>
                        <div class="col-3 col-sm-3">
                            <a href="{% url 'done_repairman' user.id %}" class="btn btn-outline-success"><i class="far fa-check-circle fa-3x"></i></a>
                        </div>
                    </div>
                    <div class="row" align="center">
                        <div class="col-3 col-sm-3">
                            <h5>Popularity</h5>
                        </div>
                        <div class="col-3 col-sm-3">
                            <h5>Requests</h5>
                        </div>
                        <div class="col-3 col-sm-3">
                            <h5>Active</h5>
                        </div>
                        <div class="col-3 col-sm-3">
                            <h5>Done jobs</h5>
                        </div>
                    </div>
                </div>
                <hr width="100%">
              {% endblock %}
            {% endif %}

            <main role="main" class="container">
              <div class="row">
                <div class="col-sm-8">
                  {% if messages %}
                      {% for mess in messages %}
                          <div class="alert alert-{{ mess.tags }} ">
                              {{ mess }}
                          </div>
                      {% endfor %}
                  {% endif %}

                  {% if user.is_authenticated and user.profile.role == 'client' %}
                    {% block content_client %}{% endblock %}
                  {% else %}
                    {% block content_repairman %}{% endblock %}
                  {% endif %}

                  {% block content %}{% endblock %}
                </div>
              </div>
            </main>

          </div>
          <!-- end content-wrapper-->
    </div>

        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
        <script type="text/javascript">
          document.getElementById('menu-toggle').addEventListener( 'click', e => {
              e.preventDefault();
              document.getElementById('wrapper').classList.toggle('menuDisplayed');
          });
          $(document).ready(function () {
              $('.popOver').popover();
          });
          $('.tool1').tooltip({ boundary: 'window' })
        </script>
    </body>
</html>

<!-- star rating iskoristiti kasnije za ocijenjivanje majstora
  <div class="rating">
      <span>☆</span><span>☆</span><span>☆</span><span>☆</span><span>☆</span>
  </div>
-->

